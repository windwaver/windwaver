reStructuredText
================

Installation
------------
1) installer Anaconda
2) installer VS code

Création d'un nouveau document
------------------------------
1) ouvrir Anaconda Prompt
2) aller dans le bon répertoire (tapez ``d:`` pour changer de partition)
3) une fois dans le répertoire où l'on veut mettre notre document,
   tapez : ::

     sphinx-quickstart

4) aux différentes questions répondre comme ci-dessous :
   
   ``> Separate source and build directories (y/n) [n]:``
   
   ``> Name prefix for templates and static dir [_]:``
   
   ``> Project name: Mon nom de projet``
   
   ``> Author name(s): Alpiq AG``
   
   ``> Project release []: 1``
   
   ``> Project language [en]: fr``
   
   ``> Source file suffix [.rst]:``
   
   ``> Name of your master document (without suffix) [index]:``
   
   ``Sphinx can also add configuration for epub output:
   > Do you want to use the epub builder (y/n) [n]:``

   ``Indicate which of the following Sphinx extensions should be
   enabled:``
   ``> autodoc: automatically insert docstrings from modules (y/n) [n]:``
   
   ``> doctest: automatically test code snippets in doctest blocks
   (y/n) [n]:``

   ``> intersphinx: link between Sphinx documentation of different projects
   (y/n) [n]:`` 

   ``> todo: write "todo" entries that can be shown or hidden on build
   (y/n) [n]: y`` 

   ``> coverage: checks for documentation coverage (y/n) [n]:``

   ``> imgmath: include math, rendered as PNG or SVG images (y/n) [n]: y``
   
   ``> mathjax: include math, rendered in the browser by MathJax (y/n)
   [n]: y``

   ``> ifconfig: conditional inclusion of content based on config values
   (y/n) [n]: y`` 

   ``> viewcode: include links to the source code of documented Python
   objects (y/n)[n]:`` 

   ``> githubpages: create .nojekyll file to publish the document on GitHub
   pages (y/n) [n]:`` 

   ``> Create Makefile? (y/n) [y]:``
   
   ``> Create Windows command file? (y/n) [y]:``

5) tapez dans le terminal : ::

     D:\tmp\sphinxTxt>make html

6) ouvrir Visual Studio Code
7) ouvrir le répertoire du projet et non le fichier .rst (File -> Open Folder)
8) il se peut que l'on soit demandé à selectionner le ``conf.py``,
   selectionnez celui qui se trouve dans le répertoire du projet
9) pour ouvrir la prévisualisation cliquer sur le symbole afficher sur
   la figure ci-dessous. Sinon ouvrir le html dans un explorateur qui
   se trouve dans le répertoire _build -> html
   
.. image:: /figures/IconePrevisualisation_cropped.png
   :alt: cette image montre où l'on doit cliquer pour ouvrir la
	 fenêtre de prévisualisation
	 
10) pour l'édition, j'utilise emacs, ouvrir le fichier index.rst

Compilation
-----------

Dans un prompt tapez :

::

   make html

ou

::
   
   make latex

ou

::
   
   make latexpdf
    
Exemples
--------

Insertion d'une figure
^^^^^^^^^^^^^^^^^^^^^^

Créer un répertoire au même endroit où il y a le fichier ``index.rst``

::

   .. image:: /figures/IconePrevisualisation_cropped.png
       :scale: 50 %
       :align: center
      

Surbrillance d'un texte
^^^^^^^^^^^^^^^^^^^^^^^

``Surbrillance d'un texte``

Tapez : ::

``Surbrillance d'un texte``

Pour afficher un bloc avec du code
    
::
   
 POUR AFFICHER CECI (un bloc avec du code)

 Tapez : 
  
 ::

 ::

  POUR AFFICHER CECI (un bloc avec du code)

Pour créer un lien à l'intérieur d'un document
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

label (à mettre où l'on veut tomber) :

::
   
 .. _Nom du lien:

Par exemple si on veut que ça tombe vers une section, on le placera
une ligne avant la section.

::
   
 .. _Nom du lien:

 reStructuredText
 ================

ref (à écrire où on veut mettre le lien)

::

 Pour plus d'information veuillez vous référer à :ref:`Nom du lien`.

Ceci donnera :

Pour plus d'information veuillez vous référer à :ref:`Nom du lien`.


Pour créer un lien à une page internet
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
En cliquant sur le lien, cela va ouvrir une nouvelle fenêtre dans le
navigateur. 

::

 En cliquant |lien|

::

 .. |lien| raw:: html

   <a href="http://home.citycable.ch/windwaver/MesSources/"
   target="_blank">ici</a>

.. warning::
   Ne pas oublier d'indenter <a href...

On peut très bien écrire directement :
::
   
 http://home.citycable.ch/windwaver/MesSources/

mais cela ne va pas ouvrir une nouvelle fenêtre dans le navigateur.

   
Commentaires
^^^^^^^^^^^^
Pour commenter une ligne, mettre deux points et un espace.

Pour commenter un bloc, mettre deux points et indenter le bloc en
dessous.

Pour insérer du code à partir d'un fichier
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Tapez le code suivant : ::

  .. literalinclude:: /sources/exemple_graphique01.py

Ce qui donnera :

.. literalinclude:: /sources/exemple_graphique01.py
		    

Changement de Thèmes
--------------------

1) choisir son thème |theme| pour cet exemple j'ai choisi ``sphinx_rtd_theme``

 .. |theme| raw:: html

   <a href="http:sphinx-themes.org"
   target="_blank">ici</a>

2) se connecter à internet (swisscom) et tapez dans une console :

   ::

      pip install sphinx_rtd_theme

      
2) ouvrir le ``conf.py`` et mettre ``html_theme = 'sphinx_rtd_theme'``

Création du document pdf
------------------------

1) à l'aide du prompt Anaconda se déplacer dans le répertoire du
   projet (où il y a le .rst) 
2) tapez ``make latexpdf`` cela va créer un répertoire latex dans le
   répertoire _build
3) ouvrir le fichier .tex dans le répertoire latex avec emacs
4) compiler
   

Divers liens utiles
-------------------

1) |lien1|

.. |lien1| raw:: html

   <a href="https://thomas-cokelaer.info/tutorials/sphinx/rest_syntax.html"
   target="_blank">thomas-cokelaer</a>

   2) |lien2|

.. |lien2| raw:: html

   <a href="http://www.sphinx-doc.org/en/master/usage/quickstart.htmll"
   target="_blank">sphinx-doc</a>

   3) |lien3|

.. |lien3| raw:: html

   <a href="https://draft-edx-style-guide.readthedocs.io/en/latest/ExampleRSTFile.html#id15"
   target="_blank">draft-edx-guide</a>

   4) |lien4|

.. |lien4| raw:: html

   <a href="https://www.complang.tuwien.ac.at/doc/python3-docutils/docs/ref/rst/restructuredtext.html"
   target="_blank">complang</a>

   5) |lien5|

.. |lien5| raw:: html

   <a href="http://docutils.sourceforge.net/rst.html"
   target="_blank">docutils.sourceforge</a> 
